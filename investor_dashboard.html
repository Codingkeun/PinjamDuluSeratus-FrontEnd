<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg+xml" href="assets/images/logo.svg">
    <title>Pinjam Dulu Seratus - Dashboard</title>

    <!-- Dashboard Chart -->
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/custom.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <script src="assets/js/jquery-3.7.1.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/moment.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Space+Mono&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <link href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" rel="stylesheet"/>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
</head>
<body>
    <div class="page">
        <div class="menu-area">
            <div class="container">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="#">
                        <img src="./assets/images/logo.svg" />
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="#">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="about-us.html">About Us</a>
                            </li>
                        </ul>
                        <div class="btn-group">
                            <div class="mr-2">
                                <h5 class="par-1em">John Doe</h5>
                                <h6 class="font-weight-light opacity-75 par-0-8em">Investor</h6>
                            </div>
                            <div class="profile-image rounded-circle bg-primary" style="width: 3rem; height: 3rem;">
                                <img src="./assets/images/profile/user-profile.svg" alt="" class="w-100 h-100">
                            </div>
                            <div class="d-flex align-items-center">
                                <button class="border-0 dropdown-toggle" data-toggle="dropdown" aria-expanded="false"></button>
                                <ul class="dropdown-menu rounded-10 border-0 container-card-shadow">
                                    <li><a class="dropdown-item" href="#"></a></li>
                                    <li><a class="dropdown-item active" href="investor_dashboard.html">Dashboard</a></li>
                                    <li><a class="dropdown-item" href="investor_investasi-aktif.html">Investasi Aktif</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="investor_profil-investor.html">Akun</a></li>
                                    <li><a class="dropdown-item" href="#">User Guide</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="index.html">Log Out</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
        </div>

        <main class="loan-area mt-5 mb-5" style="padding-inline: calc(15% / 2);">
            <h1 class="font-weight-semibold mt-5">Statistik Investasi Anda</h1>

            <ul class="nav nav-tabs mt-4">
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="#">Total Saldo yang Dipinjamkan</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Total Tips yang Didapatkan</a>
                </li>
            </ul>

            <div class="mt-5">
                <div class="row justify-content-between w-100 mx-auto" style="column-gap: 1rem; row-gap: 1rem;">
                    <div class="row d-flex align-items-center ml-0" style="column-gap: 3rem; row-gap: 1rem;">
                        <div>
                            <h3 class="par-1em">Total Pinjaman</h3>
                            <h3 class="font-weight-semibold par-1-5em" id="dashboard_investmentAmountTotal">Rp 5,000,000</h3>
                        </div>
                        <div>
                            <h3 class="par-1em">Periode</h3>
                            <div class="d-flex align-items-center">
                                <select id="dashboard_investmentMonthsPeriod" class="form-select bg-white font-weight-semibold border-0 pl-0 py-0 w-100 par-1-5em" required>
                                    <option value="januaryToMarch">Januari-Maret 2023</option>
                                    <option value="aprilToJune">April-Juni 2023</option>
                                    <option value="julyToSeptember">Juli-September 2023</option>
                                    <option value="octoberToDecember">Oktober-Desember 2023</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card z-index-2 h-100 mt-4">
                    <div class="card-body p-1">
                        <div class="chart">
                            <canvas id="chart-line" class="chart-canvas" style="height: 18rem;"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-responsive mt-5">
                <h1 class="font-weight-semibold mb-4">Daftar Piutang Aktif</h1>
                <table id="receivableTable" class="table table-striped sortable">
                    <thead>
                        <tr>
                            <th class="no-sort">Peminjam</th>
                            <th>Jumlah Pinjaman</th>
                            <th>Nomor HP</th>
                            <th>Jurusan</th>
                            <th>Kelas</th>
                            <th data-defaultsign='no-sort'></th>
                        </tr>
                    </thead>
                    <tbody id="receivableTableData">
                        <tr>
                            <td class="receivableTable_lendersNameAndNPM">
                                <div class="receivableTable_lendersName font-weight-semibold">Andrea</div>
                                <div class="par-0-8em">NPM <span class="receivableTable_lendersNPM">1019201923</span></div>
                            </td>
                            <td class="receivableTable_loanAmount font-weight-semibold">Rp 2,000,000</td>
                            <td class="receivableTableTable_lendersPhone">08123456789</td>
                            <td class="receivableTableTable_lendersMajor">Teknik Informatika</td>
                            <td class="receivableTableTable_lendersClass">TIF RM 222</td>
                            <td>
                                <button type="button" class="btn btn-primary receivableTable_detailLoan" onclick="window.location.href = 'investor_dashboard_detail-pinjaman.html'">Detail</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="receivableTable_lendersNameAndNPM">
                                <div class="receivableTable_lendersName font-weight-semibold">Jane Smith</div>
                                <div class="par-0-8em">NPM <span class="receivableTable_lendersNPM">1019201923</span></div>
                            </td>
                            <td class="receivableTable_loanAmount font-weight-semibold">Rp 7,000,000</td>
                            <td class="receivableTableTable_lendersPhone">08123456789</td>
                            <td class="receivableTableTable_lendersMajor">Teknik Informatika</td>
                            <td class="receivableTableTable_lendersClass">TIF RM 221</td>
                            <td>
                                <button type="button" class="btn btn-primary receivableTable_detailLoan" onclick="window.location.href = ''">Detail</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="receivableTable_lendersNameAndNPM">
                                <div class="receivableTable_lendersName font-weight-semibold">Ahmad Abdullah</div>
                                <div class="par-0-8em">NPM <span class="receivableTable_lendersNPM">1019201923</span></div>
                            </td>
                            <td class="receivableTable_loanAmount font-weight-semibold">Rp 5,000,000</td>
                            <td class="receivableTableTable_lendersPhone">08123456789</td>
                            <td class="receivableTableTable_lendersMajor">Teknik Informatika</td>
                            <td class="receivableTableTable_lendersClass">TIF RM 220</td>
                            <td>
                                <button type="button" class="btn btn-primary receivableTable_detailLoan" onclick="window.location.href = ''">Detail</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="receivableTable_lendersNameAndNPM">
                                <div class="receivableTable_lendersName font-weight-semibold">Maria Gonzalez</div>
                                <div class="par-0-8em">NPM <span class="receivableTable_lendersNPM">1019201923</span></div>
                            </td>
                            <td class="receivableTable_loanAmount font-weight-semibold">Rp 8,750,000</td>
                            <td class="receivableTableTable_lendersPhone">08123456789</td>
                            <td class="receivableTableTable_lendersMajor">Teknik Informatika</td>
                            <td class="receivableTableTable_lendersClass">TIF RM 219</td>
                            <td>
                                <button type="button" class="btn btn-primary receivableTable_detailLoan" onclick="window.location.href = ''">Detail</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>

        <div class="container-fluid footer position-relative d-flex flex-column" style="padding-inline: calc(15% / 2); gap: 1rem; overflow: hidden;">
            <div class="footer-logo d-flex justify-content-center align-items-center" style="gap: 1rem;">
                <div class="appLogo">
                    <img src="./assets/images/full-white-logo.svg" alt="" class="w-100">
                </div>
                <span class="material-symbols-rounded text-white" style="font-size: 3rem; opacity: .5">
                    close
                </span>
                <div class="universityLogo">
                    <img src="./assets/images/icon/university-logo.svg" alt="">
                </div>
            </div>
            <div class="footer-contact-info d-flex flex-wrap justify-content-between" style="column-gap: 1rem;">
                <div class="footer-location-info d-flex">
                    <span class=" mr-2 material-symbols-rounded text-white par-1em">
                        location_on
                    </span>
                    <p class="text-white par-0-8em">Lorem ipsum dolor sit emet</p>
                </div>
                <div class="footer-mail-info d-flex">
                    <span class=" mr-2 material-symbols-rounded text-white par-1em">
                        mail
                    </span>
                    <p class="text-white par-0-8em">pinjamduluseratus@gmail.com</p>
                </div>
                <div class="footer-phone-info d-flex">
                    <span class=" mr-2 material-symbols-rounded text-white par-1em">
                        call
                    </span>
                    <p class="text-white par-0-8em">061-234567</p>
                </div>
            </div>
            <div class="divider bg-white"></div>
            <div class="footer-bottom-section d-flex justify-content-between flex-wrap" style="margin-bottom: 1rem; column-gap: 1rem; row-gap: .5rem;">
                <p class="text-light footer-copyright par-0-8em my-auto">Copyright &#169; 2023 PinjamDuluSeratus. All right reserved.</p>
                <div class="footer-social-media d-flex my-auto" style="gap: 1rem;">
                    <img width="30" height="30" src="https://img.icons8.com/ios-glyphs/30/FFFFFF/twitter--v1.png" alt=""/>
                    <img width="30" height="30" src="https://img.icons8.com/ios-glyphs/30/FFFFFF/facebook-new.png" alt=""/>
                    <img width="30" height="30" src="https://img.icons8.com/ios-glyphs/30/FFFFFF/instagram-new.png" alt=""/>
                </div>
            </div>
            <img src="./assets/images/background/footer-pattern.svg" class="position-absolute" alt="" aria-hidden="true">
        </div>
    </div>

    <script>
        $('#receivableTable').DataTable({
            "columnDefs": [
                { "orderable": false, "targets": [2, 5] }]
        });
    </script>
    <script src="assets/js/nav-on-scroll.js"></script>
    <script src="assets/js/bootstrap-sortable.js"></script>

    <!-- Plugin for the charts -->
    <script src="../assets/js/plugins/chartjs.min.js"></script>
    <script src="../assets/js/plugins/Chart.extension.js"></script>

    <script>
        const investorDashboardComponent = () => {
            const ctx1 = document.getElementById("chart-line").getContext("2d");
    
            const gradientStroke1 = ctx1.createLinearGradient(0, 230, 0, 50);

            gradientStroke1.addColorStop(1, 'rgba(94, 114, 228, 0.2)');
            gradientStroke1.addColorStop(0.2, 'rgba(94, 114, 228, 0.0)');
            gradientStroke1.addColorStop(0, 'rgba(94, 114, 228, 0)');
            
            let label = ["Jan", "Feb", "March"];

            const config = {
                type: "line",
                data: {
                    labels: ["Jan", "Feb", "Mar"],
                    datasets: [{
                        label: "Jumlah Pinjaman",
                        tension: 0.4,
                        borderWidth: 0,
                        pointRadius: 0,
                        borderColor: "#5e72e4",
                        backgroundColor: gradientStroke1,
                        borderWidth: 3,
                        fill: true,
                        data: [50, 40, 300, 220, 500, 250, 400, 230, 500],
                        maxBarThickness: 6
                    }],
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false,
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index',
                    },
                    scales: {
                        y: {
                            grid: {
                                drawBorder: false,
                                display: true,
                                drawOnChartArea: true,
                                drawTicks: false,
                                borderDash: [5, 5]
                            },
                            ticks: {
                                display: true,
                                padding: 10,
                                color: '#fbfbfb',
                                font: {
                                    size: 11,
                                    family: "Open Sans",
                                    style: 'normal',
                                    lineHeight: 2
                                },
                            }
                        },
                            x: {
                                grid: {
                                    drawBorder: false,
                                    display: false,
                                    drawOnChartArea: false,
                                    drawTicks: false,
                                    borderDash: [5, 5]
                                },
                                ticks: {
                                    display: true,
                                    color: '#ccc',
                                    padding: 20,
                                    font: {
                                        size: 11,
                                        family: "Open Sans",
                                        style: 'normal',
                                        lineHeight: 2
                                    },
                                }
                        },
                    },
                },
            };

            let chart = new Chart(ctx1, config);

            const monthsPeriod = $('#dashboard_investmentMonthsPeriod');
            $(monthsPeriod).on('change', function () {
                chart.clear();
                chart.destroy();
                if ($(this).val() === 'januaryToMarch') {
                    chart.data.labels = ["Jan", "Feb", "Mar"];
                } else if ($(this).val() === 'aprilToJune') {
                    chart.data.labels = ["Apr", "Mei", "Jun"];
                } else if ($(this).val() === 'julyToSeptember') {
                    chart.data.labels = ["Jul", "Agu", "Sep"];
                } else if ($(this).val() === 'octoberToDecember') {
                    chart.data.labels = ["Okt", "Nov", "Des"];
                }
                chart = new Chart(ctx1, config);
            });

            const rupiah = (number) => {
                return new Intl.NumberFormat('id-ID', {
                    style: 'currency',
                    currency: 'IDR',
                    maximumSignificantDigits: 3
                }).format(number);
            }

            const amountData = chart.data.datasets;
            let total = 0;
            for (let i = 0; i <= amountData.length; i++) {
                amountData[i].data.forEach((number) => total += number);
                $('#dashboard_investmentAmountTotal').html(rupiah(total + '000'));
            }
        }

        investorDashboardComponent();
    </script>
</body>
</html>